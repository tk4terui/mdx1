- [はじめに](#はじめに)
- [制限](#制限)
  - [VMware](#vmware)
  - [mdx1 Web UI](#mdx1-web-ui)
    - [表示](#表示)
    - [検索](#検索)
  - [Windowsで使えない文字列](#windowsで使えない文字列)
  - [macOSで使えない文字列](#macosで使えない文字列)
- [命名規則](#命名規則)

# はじめに
mdx1におけるVMの命名規則について記す。

mdx1のVM名について、ユーザ自身で作成しなければいけない。
自由度が高く、利用者のグループや利用機関のルールに従って、命名することができる。
その一方で、mdx1の固有の制限や使い勝手もあるため、ある程度のmdx1に沿った形での命名規約を定めることも必要である。
本稿では、mdx1におけるVM命名規則の事例として記す。

# 制限
VMを命名するにあたり、制限が二つ存在する。仮想化基盤のハイパーバイザ側の制約と、mdx1のWebインターフェースや利用上に遭遇する制約である。

## VMware
mdx1で採用されているハイパーバイザーはVMwareであり、VMwareの制約がそのまま当てはまる。
以下はVMwareにおける命名規則の制約である

- 文字数制限: 最大80文字
- 使用可能な文字: 英数字（A-Z、a-z、0-9）、ハイフン（-）、アンダースコア（_）、およびピリオド（.）
- 特殊文字の制限: スペースやその他の特殊文字（例：@、#、$、%など）は使用できない
  - なぜかmdx1上では使える
  - 禁則が `/`のみとなってるが、スペースや`\`も使えない
  - `\`は`%5c`になる
- 一意性: 一意の名前である必要がある

## mdx1 Web UI
mdx1のダッシュボードの表示と検索には以下の制約がある

### 表示
- 表示フォント: Metropolis, "Avenir Next", "Helvetica Neue"
  - プロポーショナルフォントのため可変
- 表示文字数
  - i: 80文字以上
  - w: 27文字
  - W: 21文字
  - 1: 62文字
  - 0: 31文字
  - _: 37文字

### 検索
- 単文字列のみ
- マッチングしたのもの
- ワイルドカードや正規表現は不可能

## Windowsで使えない文字列
- 予約文字: `<>:"/\|?*`
- 先頭文字: `.\`
- 末尾文字: `.`
- 予約名: CON,PRN,AUX,NUL,COM0,COM1,COM2,COM3,COM4,COM5,COM6,COM7,COM8,COM9,COM¹,COM²,COM³,LPT0,LPT1,LPT2,LPT3,LPT4,LPT5,LPT6,LPT7,LPT8,LPT9,LPT¹,LPT²,LPT³

## macOSで使えない文字列
- Windowsと共通
- 文字列: `:`, `.`, `/`

# 命名規則
エクスポート先やOS間の互換性を考慮すると、 `ISO 9660`に準拠させる

- 最大名前長: 31文字
- 使用可能文字: [a-z][0-9]_
- 文字列の規則: スネークケース

